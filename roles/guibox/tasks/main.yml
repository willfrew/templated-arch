---
- name: Install xorg server, xmonad & xmobar
  pacman:
    state: latest
    name:
      - xorg-server
      - xorg-xinit # TODO replace with my own startx script
      - xorg-xsetroot # For setting the default cursor
      - xorg-xprop # For querying info about open windows
      - xorg-xev # For printing x server events
      - xorg-xfontsel # For visually selecting font strings
      - xorg-xrandr
      - xorg-xbacklight
      - xmonad
      - xmonad-contrib
      - xmobar
      - dmenu
      - feh
      - alsa-utils # So xmonad can control volume levels through amixer
      - libnotify

- name: Install xmonad config
  copy:
    src: xmonad/
    dest: /home/will/.xmonad
    owner: will
    group: will
  notify:
    - recompile xmonad

- name: Install xmobarrc
  template:
    src: xmobarrc.j2
    dest: /home/will/.xmobarrc
    owner: will
    group: will
  notify:
    - recompile xmonad

- name: Install other configuration dotfiles (/dotfolders)
  copy:
    src: "{{ item }}"
    dest: "/home/will/.{{ item }}"
    owner: will
    group: will
  with_items:
    - xinitrc
    - Xresources
    - wallpaper.jpg

- name: Install gui niceties
  pacman:
    state: latest
    name:
      - rxvt-unicode
      - urxvt-perls
      - chromium
      - firefox
      - ttf-dejavu
      - scrot
      - gimp
      - transmission-gtk
      - vlc

- name: Install libwidevine for Netflix DRM
  aur:
    name: chromium-widevine
    use: makepkg
    skip_installed: yes
  become: yes
  become_user: will
